# Vercel Deployment Guide for Quran Progress Tracker

This guide will help you deploy your Quran Progress Tracker application to Vercel.

## Prerequisites

1. **Vercel Account**: Sign up at [vercel.com](https://vercel.com)
2. **GitHub Repository**: Push your code to GitHub
3. **OpenAI API Key**: For AI-generated summaries (optional)

## Deployment Steps

### 1. Prepare Your Repository

Make sure your code is pushed to GitHub with the following structure:
```
Quran Progress Tracker/
├── api/
│   └── index.py
├── frontend/
│   ├── package.json
│   ├── vercel.json
│   └── src/
├── routers/
├── main.py
├── requirements.txt
├── vercel.json
└── other files...
```

### 2. Deploy Backend (API)

1. **Go to Vercel Dashboard**: [vercel.com/dashboard](https://vercel.com/dashboard)
2. **Import Project**: Click "New Project" and import your GitHub repository
3. **Configure Backend**:
   - **Framework Preset**: Other
   - **Root Directory**: Leave empty (root)
   - **Build Command**: Leave empty
   - **Output Directory**: Leave empty
   - **Install Command**: `pip install -r requirements.txt`

4. **Environment Variables**:
   - `OPENAI_API_KEY`: Your OpenAI API key (optional)
   - `DATABASE_URL`: Will be auto-generated by Vercel

5. **Deploy**: Click "Deploy"

### 3. Deploy Frontend

1. **Create New Project**: In Vercel dashboard, create another project
2. **Import Same Repository**: Import the same GitHub repository
3. **Configure Frontend**:
   - **Framework Preset**: Create React App
   - **Root Directory**: `frontend`
   - **Build Command**: `npm run build`
   - **Output Directory**: `build`
   - **Install Command**: `npm install`

4. **Environment Variables**:
   - `REACT_APP_API_URL`: `https://your-backend-app.vercel.app/api`

5. **Deploy**: Click "Deploy"

### 4. Update API Configuration

After both deployments, update the frontend's API URL:

1. Go to your frontend project in Vercel
2. Go to Settings > Environment Variables
3. Add/Update: `REACT_APP_API_URL` = `https://your-backend-app.vercel.app/api`
4. Redeploy the frontend

## Alternative: Single Project Deployment

You can also deploy both frontend and backend as a single Vercel project:

1. **Import Project**: Import your GitHub repository
2. **Framework Preset**: Other
3. **Root Directory**: Leave empty
4. **Build Command**: `cd frontend && npm run build`
5. **Output Directory**: `frontend/build`
6. **Install Command**: `pip install -r requirements.txt && cd frontend && npm install`

## Environment Variables

### Backend (API)
- `OPENAI_API_KEY`: Your OpenAI API key for AI summaries
- `DATABASE_URL`: Auto-generated by Vercel

### Frontend
- `REACT_APP_API_URL`: URL of your deployed backend API

## Database Considerations

**Important**: Vercel's serverless functions are stateless, so the SQLite database will reset on each deployment. For production use, consider:

1. **Upgrade to PostgreSQL**: Use Vercel Postgres or another cloud database
2. **Database Migration**: Update `database.py` to use PostgreSQL
3. **Environment Variables**: Set `DATABASE_URL` to your PostgreSQL connection string

## Troubleshooting

### Common Issues:

1. **CORS Errors**: Make sure CORS is configured to allow your frontend domain
2. **API Not Found**: Check that `REACT_APP_API_URL` is correctly set
3. **Database Issues**: SQLite resets on each deployment - consider PostgreSQL
4. **Build Failures**: Check that all dependencies are in `requirements.txt`

### Useful Commands:

```bash
# Test locally with production build
cd frontend && npm run build
cd .. && python -m uvicorn main:app --reload

# Check Vercel logs
vercel logs

# Deploy from command line
vercel --prod
```

## Production Checklist

- [ ] Backend deployed and accessible
- [ ] Frontend deployed and accessible
- [ ] Environment variables configured
- [ ] CORS settings updated
- [ ] Database configured (PostgreSQL recommended)
- [ ] API endpoints tested
- [ ] Frontend-backend communication working

## URLs After Deployment

- **Frontend**: `https://your-frontend-app.vercel.app`
- **Backend API**: `https://your-backend-app.vercel.app`
- **API Documentation**: `https://your-backend-app.vercel.app/docs`

## Support

If you encounter issues:
1. Check Vercel deployment logs
2. Verify environment variables
3. Test API endpoints directly
4. Check browser console for errors
